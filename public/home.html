<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Networking Hub - Home</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
      /* Star Rating Styles */
      .star-rating .star { transition: transform 0.2s; }
      .star-rating .star:hover { transform: scale(1.2); }
      
      /* Points Badge Animation */
      @keyframes pulse-gold {
          0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
          70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
          100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
      }
      .points-badge {
          display: inline-flex; align-items: center; gap: 5px;
          background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.3);
          padding: 4px 12px; border-radius: 20px; font-size: 0.6em;
          vertical-align: middle; margin-left: 10px; backdrop-filter: blur(5px);
          animation: pulse-gold 2s infinite;
      }

      /* Management Hub Hover Effects */
      .action-card { transition: transform 0.2s, box-shadow 0.2s; }
      .action-card:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0,0,0,0.1); }

      /* Executive Icon Styling */
      .icon-box {
          width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
          border-radius: 12px; background: rgba(0,0,0,0.03); color: #64748b; margin-bottom: 15px;
      }
      .action-card:hover .icon-box { background: rgba(255,255,255,0.2); color: white; }
      .bg-white-card:hover .icon-box { background: #1a1a1a; color: white; }

      /* Snapshot Bar Styling */
      .snapshot-card { background: white; padding: 20px; border-radius: 16px; border: 1px solid #f1f5f9; text-align: center; }
      .snapshot-label { font-size: 10px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 5px; letter-spacing: 1px; }
      .snapshot-value { font-size: 24px; font-weight: 800; color: #1a1a1a; }
  </style>
</head>
<body>

  <div id="navPlaceholder"></div>

  <main>
    <section class="visual-hero-banner" id="userWelcomeBanner" style="display:none;">
        <div class="hero-content-wrapper">
            <span class="hero-welcome">
                Welcome back, <span id="heroUserName">...</span> üëã
                <span id="userPointsBadge" class="points-badge" style="display:none;">
                    üíé <span id="pointsValue">0</span> Pts
                </span>
            </span>
            <h1>
                <span class="desktop-only">Unleash Your <br><span class="highlight-pulse">Pulse.</span></span>
                <span class="mobile-only">Unleash Your <span class="highlight-pulse">Pulse.</span></span>
            </h1>

            <p class="desktop-only">Your gateway to Temasek Polytechnic's vibrant community. Connect, collaborate, and create memories today.</p>
            <p class="mobile-only">Your gateway to TP's vibrant community.</p>
            <div class="hero-actions">
                <button onclick="window.location.href='events.html'" class="btn-hero-main">Explore Events</button>
                <button onclick="window.location.href='network.html'" class="btn-hero-secondary">My Network</button>
            </div>
        </div>
        <div class="hero-visual-abstract">
            <div class="ring ring-1"></div><div class="ring ring-2"></div><div class="ring ring-3"></div>
            <div class="core-circle">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
            </div>
        </div>
    </section>
    
    <div id="adminHeaderContainer"></div>

    <div id="adminSnapshotBar" style="display:none; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px;">
        <div class="snapshot-card">
            <div class="snapshot-label">Total Users</div>
            <div id="snapUsers" class="snapshot-value">-</div>
        </div>
        <div class="snapshot-card">
            <div class="snapshot-label">Active Events</div>
            <div id="snapEvents" class="snapshot-value" style="color: #d90429;">-</div>
        </div>
        <div class="snapshot-card">
            <div class="snapshot-label">Global Scans</div>
            <div id="snapScans" class="snapshot-value" style="color: #4361ee;">-</div>
        </div>
        <div class="snapshot-card">
            <div class="snapshot-label">30D Growth</div>
            <div id="snapGrowth" class="snapshot-value" style="color: #10b981;">+0%</div>
        </div>
    </div>

    <div id="adminQuickHub" style="display:none; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px;">
        <div class="action-card" style="align-items: flex-start; padding:30px; cursor:pointer; border-radius:20px;" onclick="window.location.href='admin.html'">
            <div class="icon-box">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            </div>
            <h3 style="margin: 0; font-size: 20px; color: #1a1a1a;">Event Management</h3>
            <p style="font-size: 13px; color: #666; margin: 10px 0 20px;">Schedule new events, manage registrations, and check-in attendees.</p>
            <span style="font-weight: 700; font-size: 13px; color: #d90429;">Create New Event &rarr;</span>
        </div>

        <div class="action-card bg-white-card" style="align-items: flex-start; background: white; border: 1px solid #eee; padding:30px; cursor:pointer; border-radius:20px;" onclick="window.location.href='adminusers.html'">
            <div class="icon-box">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            </div>
            <h3 style="margin: 0; font-size: 20px; color: #1a1a1a;">User Directory</h3>
            <p style="font-size: 13px; color: #666; margin: 10px 0 20px;">Manage user profiles, adjust roles, and view individual networking stats.</p>
            <span style="font-weight: 700; font-size: 13px; color: #d90429;">Manage Users &rarr;</span>
        </div>

        <div class="action-card bg-white-card" style="align-items: flex-start; background: white; border: 1px solid #eee; padding:30px; cursor:pointer; border-radius:20px;" onclick="window.location.href='admin-connections.html'">
            <div class="icon-box">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
            </div>
            <h3 style="margin: 0; font-size: 20px; color: #1a1a1a;">Connection Logs</h3>
            <p style="font-size: 13px; color: #666; margin: 10px 0 20px;">Audit networking interactions and read private feedback notes between users.</p>
            <span style="font-weight: 700; font-size: 13px; color: #4361ee;">View Networking Logs &rarr;</span>
        </div>
    </div>

    <section id="adminActivitySection" style="display: none; margin-top: 10px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
            <h2 style="margin:0; font-size: 18px; color: #1a1a1a;">Live Platform Activity</h2>
            <span style="font-size: 11px; color: #10b981; background: #ecfdf5; padding: 4px 10px; border-radius: 20px; font-weight: 600;">‚óè Live</span>
        </div>
        <div style="background: white; border-radius: 20px; padding: 0; box-shadow: 0 5px 20px rgba(0,0,0,0.03); border: 1px solid #f5f5f5; overflow: hidden;">
            <div id="adminActivityList">
                <p style="padding: 25px; color: #999;">Loading system activity...</p>
            </div>
        </div>
    </section>

    <div id="userDashboardWrapper">
        <div id="todaysEventSection" style="display: none; margin-bottom: 30px;"></div>
        <div class="dashboard-grid">
            <div id="nextEventCard" class="hero-card">
                <div class="hero-content">
                    <span class="hero-badge">Upcoming Event</span>
                    <h1 id="heroEventName">Loading...</h1>
                    <p id="heroEventDetails">Finding your earliest event...</p>
                </div>
                <div class="hero-footer">
                    <div class="hero-time"><span id="heroEventDate">--</span></div>
                    <div class="hero-location"><span id="heroEventLoc">--</span></div>
                </div>
            </div>
            <div class="quick-actions-sidebar">
                <button id="scanQRBtn" class="action-tile scan-tile">
                    <div class="tile-info"><h3>Scan QR</h3><span>Use Camera</span></div>
                </button>
                <button id="uploadQRBtn" class="action-tile upload-tile">
                    <div class="tile-info"><h3>Upload</h3><span>From Gallery</span></div>
                </button>
            </div>
        </div>
        <div id="qr-reader-container" style="display:none; text-align:center; padding: 20px;">
            <div id="qr-reader" style="width:300px; margin:0 auto;"></div>
            <button id="stopScanBtn" style="margin-top:15px; padding: 10px 20px; background: #1a1a1a; color: white; border-radius: 12px; border: none; cursor: pointer;">Stop Scanning</button>
        </div>
        <div id="userEventsWrapper">
            <h2>Upcoming Events</h2>
            <div id="eventContainer"></div>
        </div>
        <section id="recentActivitySection" style="margin-top: 40px; background: white; border-radius: 20px; padding: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.03); border: 1px solid #f5f5f5;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px; border-bottom: 1px solid #f0f0f0; padding-bottom: 15px;">
              <h2 style="margin:0; font-size: 18px; color: #1a1a1a;">Recent Activity</h2>
              <a href="network.html" style="font-size: 13px; color: #d90429; font-weight: 600; text-decoration: none;">View All &rarr;</a>
            </div>
            <div id="recentActivityList"><p style="color:#999; font-size:14px;">Loading...</p></div>
        </section>
    </div>
  </main>

  <div id="feedbackModal" class="modal" style="display:none;">
      <div class="popup-content" style="text-align: center; max-width: 400px;">
          <h3 style="color:#d90429;">Rate this Event</h3>
          <input type="hidden" id="feedbackEventId">
          <div class="star-rating" style="display: flex; justify-content: center; gap: 10px; margin-bottom: 20px;">
              <span class="star" data-value="1" style="font-size: 30px; cursor: pointer; color: #ccc;">‚òÖ</span>
              <span class="star" data-value="2" style="font-size: 30px; cursor: pointer; color: #ccc;">‚òÖ</span>
              <span class="star" data-value="3" style="font-size: 30px; cursor: pointer; color: #ccc;">‚òÖ</span>
              <span class="star" data-value="4" style="font-size: 30px; cursor: pointer; color: #ccc;">‚òÖ</span>
              <span class="star" data-value="5" style="font-size: 30px; cursor: pointer; color: #ccc;">‚òÖ</span>
          </div>
          <input type="hidden" id="selectedRating" value="0">
          <textarea id="feedbackComment" placeholder="What did you like?" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; height: 80px;"></textarea>
          <div style="margin-top: 20px; display: flex; gap: 10px;">
              <button onclick="document.getElementById('feedbackModal').style.display='none'" style="flex: 1; padding: 10px; border: none; background: #eee; border-radius: 8px; cursor: pointer;">Cancel</button>
              <button id="submitFeedbackBtn" style="flex: 1; padding: 10px; border: none; background: #d90429; color: white; border-radius: 8px; font-weight: bold; cursor: pointer;">Submit</button>
          </div>
      </div>
  </div>
  <div id="scannedProfileModal" class="modal" style="display:none;">
      <div class="popup-content"></div>
  </div>
  <div id="noteModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>Add Note</h3>
      <textarea id="noteText" style="width:100%; height:100px; padding:10px; border:1px solid #ccc; border-radius:8px; margin:15px 0;"></textarea>
      <div class="modal-actions" style="display:flex; gap:10px; justify-content:flex-end;">
        <button id="cancelNoteBtn" style="background:#eee; color:#333; padding:8px 15px; border:none; border-radius:6px; cursor:pointer;">Cancel</button>
        <button id="saveNoteBtn" style="background:#d90429; color:white; padding:8px 15px; border:none; border-radius:6px; cursor:pointer;">Save</button>
      </div>
    </div>
  </div>

  <script src="js/navLoader.js"></script> 
   
  <script src="https://unpkg.com/html5-qrcode"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="js/registrationHandler.js"></script>
  <script src="js/events.js"></script>
  <script src="js/qrScanner.js"></script>
  <script src="js/viewProfiles.js"></script>
  <script src="js/home.js"></script>

  <script>
    document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', function() {
            const val = this.getAttribute('data-value');
            document.getElementById('selectedRating').value = val;
            document.querySelectorAll('.star').forEach(s => {
                s.style.color = s.getAttribute('data-value') <= val ? '#FFD700' : '#ccc';
            });
        });
    });
  </script>
<script src="js/mobile-check.js"></script>
</body>
</html>